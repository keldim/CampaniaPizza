<pizza-modal></pizza-modal>
<salad-modal></salad-modal>
<drink-modal></drink-modal>
<dessert-modal></dessert-modal>
<div class="hide-order-online">
  <order-online></order-online>
  <current-order></current-order>
</div>

<div class="container pickup-location">
  <div class="checkout-header">Checkout</div>
  <div class="checkout-subheader">Pickup Location</div>
  <div class="row checkout-row-1">
    <div class="col">
      <span *ngIf="pickupLocation=='Midtown'">
        Campania Pizza, Midtown<br>
        31 W 46th St<br>
        New York, NY 10036
      </span>
      <span *ngIf="pickupLocation=='Chelsea'">
        Campania Pizza, Chelsea<br>
        601 6th Ave<br>
        New York, NY 10011
      </span>
      <span *ngIf="pickupLocation=='East Village'">
        Campania Pizza, East Village<br>
        32 St Marks Pl<br>
        New York, NY 10003
      </span>
    </div>
    <div class="col checkout-row-1-col-2">
      <a class="btn btn-outline-secondary" href="#" [routerLink]="['/order-online']" role="button">Modify Order</a>
    </div>
  </div>
</div>

<span #content>
  <div class="container box-form">
    <div class="row">
      <div class="col name-column">
        Order Details
      </div>
      <div class="col price-column">
        Amount
      </div>
    </div>
    <!-- <div *ngFor="let pizzaItem of pizzaModalComponent.pizzaItems"> -->
    <div *ngFor="let pizzaItem of pizzaItems">
      <div class="row product-line">
        <div *ngIf="pizzaItem.type=='BUILD YOUR OWN PIZZA'" class="col product-name">{{ pizzaItem.quantity }} x
          {{ pizzaItem.type }}</div>
        <div *ngIf="pizzaItem.type!='BUILD YOUR OWN PIZZA'" class="col product-name">{{ pizzaItem.quantity }} x
          {{ pizzaItem.type }}</div>
        <div class="col product-price">({{ pizzaItem.quantity }} x ${{ pizzaItem.price }}) =
          ${{ (pizzaItem.quantity * pizzaItem.price).toFixed(2) }}</div>
      </div>
      <div *ngFor="let choice of pizzaModalComponent.buildDisplayForCheckout(pizzaItem)">
        <div class="row">
          <div class="col choice">
            {{ choice }}
          </div>
        </div>
      </div>
    </div>

    <div *ngFor="let saladItem of saladItems">
      <!-- <div *ngFor="let saladItem of saladModalComponent.saladItems"> -->
      <div class="row product-line">
        <div *ngIf="saladItem.type=='BUILD YOUR OWN SALAD'" class="col product-name">{{ saladItem.quantity }} x
          {{ saladItem.type }}</div>
        <div *ngIf="saladItem.type!='BUILD YOUR OWN SALAD'" class="col product-name">{{ saladItem.quantity }} x
          {{ saladItem.type }}</div>
        <div class="col product-price">({{ saladItem.quantity }} x ${{ saladItem.price }}) =
          ${{ (saladItem.quantity * saladItem.price).toFixed(2) }}</div>
      </div>
      <div *ngFor="let choice of saladModalComponent.buildDisplayForCheckout(saladItem)">
        <div class="row">
          <div class="col choice">
            {{ choice }}
          </div>
        </div>
      </div>
    </div>

    <div *ngFor="let drinkItem of drinkItems">
      <!-- <div *ngFor="let drinkItem of drinkModalComponent.drinkItems"> -->
      <div class="row product-line-dd">
        <div class="col product-name">{{ drinkItem.quantity }} x {{ drinkItem.type }}</div>
        <div class="col product-price">({{ drinkItem.quantity }} x ${{ drinkItem.price }}) =
          ${{ (drinkItem.quantity * drinkItem.price).toFixed(2) }}</div>
      </div>
    </div>

    <div *ngFor="let dessertItem of dessertItems">
      <!-- <div *ngFor="let dessertItem of dessertModalComponent.dessertItems"> -->
      <div class="row product-line-dd">
        <div *ngIf="dessertItem.type=='Cookies'" class="col product-name">{{ dessertItem.quantity }} x
          {{ dessertItem.cookieChoice.toUpperCase() }}
        </div>
        <div *ngIf="dessertItem.type=='Brownies'" class="col product-name">{{ dessertItem.quantity }} x
          {{ dessertItem.brownieChoice.toUpperCase() }}</div>
        <div class="col product-price">({{ dessertItem.quantity }} x ${{ dessertItem.price }}) =
          ${{ (dessertItem.quantity * dessertItem.price).toFixed(2) }}</div>
      </div>
    </div>

    <div class="row subtotal-above">
      <div class="col product-name">
        Subtotal
      </div>
      <div class="col product-price">
        ${{ currentOrderComponent.showSubtotal() }}
      </div>
    </div>
    <div class="row">
      <div class="col product-name">
        TAX
      </div>
      <div class="col product-price">
        ${{ currentOrderComponent.showLocalTax() }}
      </div>
    </div>
    <div class="row total-row">
      <div class="col product-name">
        Total
      </div>
      <div class="col product-price">
        ${{ currentOrderComponent.showTotal() }}
      </div>
    </div>
  </div>
</span>

<div class="container box-form">
  <div class="contact-info-header">Contact Info</div>
  <form [formGroup]="contactInfo" class="contact-info-form">
    <!-- <span *ngIf="contactInfo.get('firstName').hasError('required') || contactInfo.get('lastName').hasError('required')
    || contactInfo.get('email').hasError('required') || contactInfo.get('phoneNumber').hasError('required')">
      <span style="font-size: 12px; color: #b80000; margin-left: 10px">Please fill all boxes.</span>
    </span> -->

    <span class="row contact-info-row">
      <span *ngIf="contactInfo.get('firstName').hasError('required')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        This field is required
      </span>
      <span *ngIf="contactInfo.get('firstName').hasError('pattern')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        Enter valid name, at least two characters are required
      </span>
      <span *ngIf="contactInfo.get('lastName').hasError('required')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        This field is required
      </span>
      <span *ngIf="contactInfo.get('lastName').hasError('pattern')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        Enter valid name, at least two characters are required
      </span>
    </span>
    <div class="row contact-info-row">
      <div class="col col-center">
        First Name:
      </div>
      <div class="col col-center">
        <input type="text" formControlName="firstName">
      </div>
      <div class="col col-center">
        Last Name:
      </div>
      <div class="col col-center">
        <input type="text" formControlName="lastName">
      </div>
    </div>
    <span class="row contact-info-row">
      <span *ngIf="contactInfo.get('email').hasError('required')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        This field is required
      </span>
      <span *ngIf="contactInfo.get('email').hasError('pattern')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        Enter valid email address
      </span>
      <!-- <span class="col col-center hide-order-online">
        empty space
      </span>
      <span class="col col-center hide-order-online">
        empty space
      </span> -->
      <span *ngIf="contactInfo.get('phoneNumber').hasError('required')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        This field is required
      </span>
      <span *ngIf="contactInfo.get('phoneNumber').hasError('pattern')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        Enter valid 10 digit phone number, only enter numbers
      </span>
    </span>
    <div class="row contact-info-row">
      <div class="col col-center">
        Email:
      </div>
      <div class="col col-center">
        <input type="text" formControlName="email">
      </div>
      <div class="col col-center">
        Phone Number:
      </div>
      <div class="col col-center">
        <input type="text" formControlName="phoneNumber">
      </div>
    </div>
  </form>
</div>

<div class="container box-form">
  <div class="payment-header">Payment</div>
  <form [formGroup]="creditCardForm" class="payment-form">
    <div class="row payment-row">
      <div class="col payment-subheader">
        Accepted Credit Cards:
      </div>
      <div class="col col-center">
        <img src="../../../assets/images/credit_card_logos_10.gif">
      </div>
    </div>
    <span class="row contact-info-row">
      <span *ngIf="creditCardForm.get('cardNumber').hasError('required')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        This field is required
      </span>
      <span *ngIf="creditCardForm.get('cardNumber').hasError('pattern')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        Enter valid card number, only enter numbers
      </span>
      <span *ngIf="creditCardForm.get('expMonth').hasError('required')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        This field is required
    </span>
      <span *ngIf="creditCardForm.get('expMonth').hasError('pattern')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        Enter valid month: 01, 02, 03... 12
      </span>
    </span>
    <div class="row payment-row">
      <div class="col col-center">
        Card Number:
      </div>
      <div class="col col-center">
        <input type="text" formControlName="cardNumber">
      </div>
      <div class="col col-center">
        Expiration Month:
      </div>
      <div class="col col-center">
        <input type="text" formControlName="expMonth">
      </div>
    </div>
    <span class="row contact-info-row">
      <span *ngIf="creditCardForm.get('expYear').hasError('required')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        This field is required
      </span>
      <span *ngIf="creditCardForm.get('expYear').hasError('pattern')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        Enter valid year
      </span>
      <span *ngIf="creditCardForm.get('cvc').hasError('required')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        This field is required
      </span>
      <span *ngIf="creditCardForm.get('cvc').hasError('pattern')" class="col col-center"
        style="font-size: 12px; color: #b80000; margin-left: 10px">
        Enter valid cvc
      </span>
    </span>
    <div class="row payment-row">
      <div class="col col-center">
        Expiration Year:
      </div>
      <div class="col col-center">
        <input type="text" formControlName="expYear">
      </div>
      <div class="col col-center">
        CVC:
      </div>
      <div class="col col-center">
        <input type="text" formControlName="cvc">
      </div>
    </div>
    <div class="place-order-button">
      <button type="button" class="btn btn-outline-success" (click)="chargeCreditCard()"
        [disabled]="!contactInfo.valid || !creditCardForm.valid || pickupLocation == '' || currentOrderComponent.showTotal() == '0.00'">Place Order</button>
      <!-- navigate to the link inside chargeCreditCard()? -->
      <!-- do not show the page until the method is completed? see kurata angular course? -->
    </div>
  </form>
</div>

<div id="download" class="imgCapture">
  <img #canvas>
  <a #downloadLink></a>
</div>
